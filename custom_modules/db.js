var MongoClient = require('mongodb').MongoClient;var mongodb;var mongoURL = 'mongodb://localhost:27017/pkp';// var mongoURL = 'mongodb://carson:alphatau@ds011241.mlab.com:11241/pkp';var Promise = require('bluebird');module.exports = {    connect: function() {        MongoClient.connect(mongoURL, function(err, database) {            if (err) throw err;            mongodb = database;        });    },        db: function () {        return mongodb;    },        getPeopleFromPositions: function (db, positions, callback) {        var results = [];        var promises = [];        positions.forEach(function (position) {            position = position.toLowerCase();            promises.push(db.collection('brothers').findOne({positions: position}).then(function(result) {                results.push(result);            }));        });        Promise.all(promises).then(function () {            if (callback) callback(results);        });    },        close: function (db) {        db.close()    }};